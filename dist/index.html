<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevDetective</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" crossorigin href="/assets/index-4yQ5rA7W.css">
  </head>
  <body class="dark">
    <div
      class="bg-[#f6f8ff] dark:bg-[#141D2F] text-sm w-[100%] relative h-[100vh]"
    >
      <div
        class="wrapper w-full h-full flex flex-col items-center justify-center gap-3"
      >
        <!-- header and theme -->
        <div class="header w-[450px] gap-9 flex items-center justify-between">
          <h2 class="icon text-[#4b6a9b] dark:text-white font-black text-2xl">
            DevDetective
          </h2>
          <div class="flex gap-4 justify-between items-center">
            <div
              class="rounded-full bg-[#f6f8ff] dark:bg-[#141d2f] cursor-pointer"
            >
              <img
                src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20fill='%23c6cbd2'%20viewBox='0%200%20256%20256'%3e%3cpath%20d='M224,152v56a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V152a8,8,0,0,1,16,0v56H208V152a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,132.69V40a8,8,0,0,0-16,0v92.69L93.66,106.34a8,8,0,0,0-11.32,11.32Z'%3e%3c/path%3e%3c/svg%3e"
                alt=""
                class="download"
                width="24px"
              />
            </div>
            <div
              class="theme flex justify-between items-center w-[75px] tracking-[2.5px] font-bold decoration-[#4b6a9b] dark:decoration-white hover:cursor-pointer"
            >
              <p class="text-[#4b6a9b] dark:text-white theme-name">LIGHT</p>
              <p class="text-[#4b6a9b] dark:text-white">
                <img src="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20fill='%23e0e0e0'%20viewBox='0%200%20256%20256'%3e%3cpath%20d='M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z'%3e%3c/path%3e%3c/svg%3e" alt="" class="theme-icon" width="24px" />
              </p>
            </div>
          </div>
        </div>

        <!-- search bar -->
        <div
          class="search-container w-600px relative bg-[#fefefe] dark:bg-[#1E2A47] rounded-[15px] h-[50px] flex items-center w-[450px] top-4 p-[6px] justify-between"
        >
          <div class="flex">
            <p>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="#0079ff"
                viewBox="0 0 256 256"
              >
                <path
                  d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                ></path>
              </svg>
            </p>
            <input
              type="text"
              placeholder="Github Username "
              id="entry-field"
              required
              class="w-[250px] outline-none bg-none text-[#4b6a9b] dark:text-white pl-[5px] placeholder:text-[#4b6a9b] dark:placeholder:dark:text-white dark:bg-[#1e2a47] placeholder:-tracking-[0.5px] placeholder:text-sm"
            />
          </div>
          <!-- <div class="error">
                <p id="no-results">no search results</p>
            </div> -->
          <p>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="#4b6a9b"
              viewBox="0 0 256 256"
              class="cross"
            >
              <path
                d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"
              ></path>
            </svg>
          </p>
          <button
            title="search"
            class="search-button w-[84px] pr-10px bg-[#0079ff] text-white font-bold text-sm h-[30px] rounded-md hover:cursor-pointer hover:bg-[#60abff]"
          >
            Search
          </button>
        </div>

        <!-- profile card -->
        <div
          class="profile-container bg-[#fefefe] dark:bg-[#1E2A47] rounded-2xl w-[450px] mt-[25px] p-[24px] flex gap-6"
          data-profile
        >
          <div class="w-100px">
            <img
              src=""
              alt="profile-image"
              profile-img
              class="min-w-[90px] rounded-[90px]"
            />
          </div>
          <div>
            <div
              class="flex justify-between w-[300px] items-center tracking-tighter font-bold"
            >
              <p class="name text-3xl text-[#2b3442] dark:text-white"></p>
              <p class="date text-gray-500 opacity-70"></p>
            </div>

            <p
              class="username text-[#0079ff] tracking-tighter underline font-semibold mt-[6px]"
            ></p>
            <p
              class="info mt-[6px] mb-[30px] text-[#4b6a9b] dark:text-white"
            ></p>
            <div>
              <div
                class="flex justify-between h-[100px] bg-[#f6f8ff] dark:bg-[#141D2F] rounded-[20px] pt-[30px] pb-[30px] pl-[20px] pr-[20px] mb-[20px]"
              >
                <div class="flex flex-col items-center justify-between gap-2">
                  <p class="text-gray-500 tracking-tighter">Repos</p>
                  <p class="repo font-extrabold dark:text-white"></p>
                </div>
                <div class="flex flex-col items-center justify-between gap-2">
                  <p class="text-gray-500 tracking-tighter">Followers</p>
                  <p class="followers font-extrabold dark:text-white"></p>
                </div>
                <div class="flex flex-col items-center justify-between gap-2">
                  <p class="text-gray-500 tracking-tighter">Following</p>
                  <p class="following font-extrabold dark:text-white"></p>
                </div>
              </div>
            </div>
            <div
              class="social-media flex flex-wrap items-center justify-between gap-2"
            >
              <div
                class="location flex items-center justify-between gap-1 text-gray-400"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="#4b6a9b"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M128,16a88.1,88.1,0,0,0-88,88c0,75.3,80,132.17,83.41,134.55a8,8,0,0,0,9.18,0C136,236.17,216,179.3,216,104A88.1,88.1,0,0,0,128,16Zm0,56a32,32,0,1,1-32,32A32,32,0,0,1,128,72Z"
                  ></path>
                </svg>
                <p class="location-para"></p>
              </div>
              <div
                class="link flex items-center justify-between gap-1 text-gray-400"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="#4b6a9b"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M137.54,186.36a8,8,0,0,1,0,11.31l-9.94,10A56,56,0,0,1,48.38,128.4L72.5,104.28A56,56,0,0,1,149.31,102a8,8,0,1,1-10.64,12,40,40,0,0,0-54.85,1.63L59.7,139.72a40,40,0,0,0,56.58,56.58l9.94-9.94A8,8,0,0,1,137.54,186.36Zm70.08-138a56.08,56.08,0,0,0-79.22,0l-9.94,9.95a8,8,0,0,0,11.32,11.31l9.94-9.94a40,40,0,0,1,56.58,56.58L172.18,140.4A40,40,0,0,1,117.33,142,8,8,0,1,0,106.69,154a56,56,0,0,0,76.81-2.26l24.12-24.12A56.08,56.08,0,0,0,207.62,48.38Z"
                  ></path>
                </svg>
                <a class="link-para"></a>
              </div>
              <div
                class="twitter flex items-center justify-between gap-1 text-gray-400"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="#4b6a9b"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M245.66,77.66l-29.9,29.9C209.72,177.58,150.67,232,80,232c-14.52,0-26.49-2.3-35.58-6.84-7.33-3.67-10.33-7.6-11.08-8.72a8,8,0,0,1,3.85-11.93c.26-.1,24.24-9.31,39.47-26.84a110.93,110.93,0,0,1-21.88-24.2c-12.4-18.41-26.28-50.39-22-98.18a8,8,0,0,1,13.65-4.92c.35.35,33.28,33.1,73.54,43.72V88a47.87,47.87,0,0,1,14.36-34.3A46.87,46.87,0,0,1,168.1,40a48.66,48.66,0,0,1,41.47,24H240a8,8,0,0,1,5.66,13.66Z"
                  ></path>
                </svg>
                <a class="twitter-para"></a>
              </div>
              <div
                class="email flex items-center justify-between gap-1 text-gray-400"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="#4b6a9b"
                  viewBox="0 0 256 256"
                >
                  <path
                    d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"
                  ></path>
                </svg>
                <a class="email-para"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        const cross = document.querySelector(".cross");
const entryField = document.querySelector("#entry-field");
const profileContainer = document.querySelector("[data-profile]");
const profileImage = document.querySelector("[profile-img]");
const profileName = document.querySelector(".name");
const createdDate = document.querySelector(".date");
const username = document.querySelector(".username");
const bio = document.querySelector(".info");
const repos = document.querySelector(".repo");
const followers = document.querySelector(".followers");
const following = document.querySelector(".following");
const locationPara = document.querySelector(".location-para");
const websiteLink = document.querySelector(".link-para");
const twitter = document.querySelector(".twitter-para");
const email = document.querySelector(".email-para");
const searchBtn = document.querySelector(".search-button");
const theme = document.querySelector(".theme");
let darkMode = false;
const themeName = document.querySelector(".theme-name");
const themeIcon = document.querySelector(".theme-icon");
const download = document.querySelector(".download");

download.addEventListener("click", (e) => {
  capture(profileContainer);
});

entryField.addEventListener("input", (e) => {
  if (e.target.value) {
    cross.classList.add("active");
  } else {
    cross.classList.remove("active");
    profileContainer.classList.remove("active");
  }
});

cross.addEventListener("click", () => {
  entryField.value = "";
  cross.classList.remove("active");
  profileContainer.classList.remove("active");
});

async function renderProfileInfo(data) {
  profileImage.src = data.avatar_url;
  profileName.textContent = data.name;
  createdDate.textContent = new Date(data.created_at).toDateString();
  username.textContent = `@${data.login}`;
  bio.textContent = data.bio;
  const response = await fetch(data.repos_url);
  const data2 = await response.json();
  repos.textContent = data2.length;
  followers.textContent = data.followers;
  following.textContent = data.following;
  // locationPara.textContent = data?.location || "Not Available";
  setElement(locationPara, data.location);
  websiteLink.href = data?.blog || "Not Available";
  // websiteLink.textContent = data?.blog || "Not Available";
  setElement(websiteLink, data.blog);
  // twitter.textContent = data?.twitter_username || "Not Available";
  twitter.href = data?.twitter_username || "Not Available";
  // twitter.textContent = data.twitter_username || "Not Available";
  setElement(twitter, data.twitter_username);
  email.href = data?.email || "Not Available";
  // email.textContent = data.email || "Not Available";
  setElement(email, data.email);
}

function setElement(element, text) {
  if (text) {
    element.textContent = text;
    element.classList.add("blue-color");
  } else {
    element.textContent = "Not Available";
  }
}

async function fetchDetails(github) {
  try {
    const response = await fetch(`https://api.github.com/users/${github}`);
    const data = await response.json();
    if (data.name) {
      profileContainer.classList.add("active");
      download.classList.add("active");
      renderProfileInfo(data);
    } else {
      download.classList.remove("active");
    }
  } catch (err) {
    console.log("Error in fetching data...");
  }
}

searchBtn.addEventListener("click", (e) => {
  e.preventDefault();
  let githubID = entryField.value;

  if (githubID === "") return;
  else fetchDetails(githubID);
});

theme.addEventListener("click", () => {
  let body = document.body;
  if (body.classList.contains("dark")) {
    body.classList.remove("dark");
    themeName.textContent = "DARK";
    themeIcon.src = "moon-fill.svg";
    download.src = "dark-download.svg";
  } else {
    body.classList.add("dark");
    themeName.textContent = "LIGHT";
    themeIcon.src = "sun.svg";
    download.src = "light-download.svg";
  }
});

// function darkModeProperties(){
//     document.body.classlist.add("dark");
//     themeName.textContent="LIGHT";
//     themeIcon.src="sun.svg";
//     darkMode=true;
//     localStorage.setItem("dark-mode", true);  console.log("setting dark mode to false");

//     console.log("setting dark mode to true");

// }
// function lightModeProperties(){
//     document.body.classlist.remove("dark");
//     themeName.textContent="DARK";
//     themeIcon.src="moon-fill.svg";
//     darkMode = false;
//     console.log("darkmode changed to " + darkMode);

//     localStorage.setItem("dark-mode", false);
//     console.log("setting dark mode to false");
// }

// function init() {
//     //initialise dark-mode variable to false;
//     //darkMode = true -> dark mode enable karna h
//     //darMode = false -> light mode enable karna h
//     darkMode = false;

//     //HW
//   // const prefersDarkMode = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

//     const value = localStorage.getItem("dark-mode");

//     if(value === null) {
//       console.log("null k andar");
//       localStorage.setItem("dark-mode", darkMode);
//       lightModeProperties();
//     }
//     else if(value == "true") {
//       console.log("truer k andar");
//       darkModeProperties();
//     }
//     else if(value == "false") {
//       console.log("false k andar");
//       lightModeProperties();
//     }
//   }

//   init();

function capture(element) {
  html2canvas(element, {
    backgroundColor: null,
    useCors: true,
  }).then(function (canvas) {
    const URL = canvas.toDataURL("image/jpeg", 1);
    const a = document.createElement("a");
    a.href = URL;
    a.download = `dev_detective_${profileName.textContent}.jpeg`;
    a.click();
  });
}

    </script>
  </body>
</html>
